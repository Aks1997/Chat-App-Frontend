(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t){},111:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),s=a(30),r=a.n(s),i=a(32),m=a(8),c=a(72),u={addUser:"ADD_USER"},l=a(69),p={socket:a.n(l)()("http://34.66.214.100:4000"),_id:"",id:"",name:"Akhil",room:"Cricket"},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.addUser:var a=Object(c.a)({},e);return a._id=t._id,a.id=t.id,a.name=t.name,a.room=t.room,a;default:return e}},d=(a(111),a(41)),_=a(11),v=a(12),g=a(14),f=a(13),b=a(15),E=a(9),y=a(16),k=a.n(y),C=function(e){return n.a.createElement("div",{className:k.a.roomdiv},n.a.createElement("h1",{className:k.a.roomheader},"Create Room"),n.a.createElement("div",{className:k.a.roominputdiv},n.a.createElement("input",{className:k.a.roominput,type:"text",placeholder:"Your Name",onChange:e.nameChangeHandler,required:!0}),n.a.createElement("input",{className:k.a.roominput,type:"text",placeholder:"Room Name",onChange:e.roomChangeHandler,required:!0}),n.a.createElement("input",{className:k.a.roominput,type:"password",placeholder:"Password",onChange:e.passChangeHandler,required:!0})),n.a.createElement("button",{className:k.a.roombutton,onClick:e.buttonClickedHandler},"Submit"))},w=a(33),N=a.n(w),j=a(23),S=a.n(j),O=function(e){return n.a.createElement("div",{className:S.a.roomdiv},n.a.createElement("h3",{className:S.a.roomheader},e.name),n.a.createElement("p",{className:S.a.roomcount},"Number of users in group are ",e.users.length),n.a.createElement("button",{className:S.a.roomjoin,onClick:e.click},"Join"))},R=a(24),H=a.n(R),x=function(e){return n.a.createElement("div",{className:H.a.popup},n.a.createElement("div",{className:H.a.popup_inner},n.a.createElement("h1",{className:H.a.popupheader},e.message),e.children,n.a.createElement("br",null),n.a.createElement("button",{className:H.a.btn,onClick:e.closePopup},e.buttonMess),n.a.createElement("br",null),e.warning))},P=a(20),M=a.n(P),D=function(e){function t(){var e,a;Object(_.a)(this,t);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={name:"",room:"",password:"",warning:"",base_url:"http://34.66.214.100:4000",rooms:[],roomsToShow:null,showpopup:!1},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.a.get(this.state.base_url+"/getrooms").then(function(t){console.log(t);var a=t.data.map(function(e,t){return{name:e.name,users:e.users,_id:e._id}});e.setState({rooms:a},function(){var t=e.state.rooms.map(function(t,a){return n.a.createElement(O,{key:a,_id:t._id,name:t.name,users:t.users,click:function(a){return e.roomJoin(a,t.name)}})});e.setState({roomsToShow:t})})}).catch(function(e){console.log(e)})}},{key:"roomJoin",value:function(e,t){this.setState({showpopup:!0,room:t,warning:""})}},{key:"nameChangeHandler",value:function(e){this.setState({name:e.target.value})}},{key:"passChangeHandler",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;if(this.setState({warning:""}),""!==this.state.name&&""!==this.state.password){if(this.state.name.length>20)return void this.setState({warning:"Name length Can't exceed 20 characters"});this.setState({showpopup:!1},function(){t.props.data.socket.emit("joinRoom",{name:t.state.name,room:t.state.room,password:t.state.password})})}else this.setState({warning:"Both Fields Are Mandatory!"})}},{key:"closePopup",value:function(e){this.setState({showpopup:!1})}},{key:"render",value:function(){var e=this,t=n.a.createElement("div",null,n.a.createElement("h4",{className:M.a.roomname},"Room: ",this.state.room),n.a.createElement("input",{className:M.a.roominput,type:"text",placeholder:"Your Name",onChange:function(t){return e.nameChangeHandler(t)}}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("input",{className:M.a.roominput,type:"password",placeholder:"password",onChange:function(t){return e.passChangeHandler(t)}}),n.a.createElement("br",null),n.a.createElement("button",{className:M.a.btn,onClick:function(t){return e.onSubmit(t)}},"Submit"));return n.a.createElement("div",{className:M.a.roomlistdiv},this.state.showpopup?n.a.createElement(x,{buttonMess:"Close",closePopup:function(t){return e.closePopup(t)},warning:this.state.warning},t):null,this.state.roomsToShow)}}]),t}(o.Component),A=Object(m.b)(function(e){return{data:e}},null)(D),L=function(e){function t(){var e,a;Object(_.a)(this,t);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={name:"",room:"",password:"",popup:null},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"nameChangeHandler",value:function(e){this.setState({name:e.target.value},function(){console.log(this.state.name)})}},{key:"roomChangeHandler",value:function(e){this.setState({room:e.target.value},function(){console.log(this.state.room)})}},{key:"passChangeHandler",value:function(e){this.setState({password:e.target.value},function(){console.log(this.state.password)})}},{key:"buttonClickedHandler",value:function(e){if(""!==this.state.name&&""!==this.state.room&&""!==this.state.password){if(this.state.name.length>20)return void this.createPopup("Name length Can't exceed 20 characters","Close");if(this.state.room.length>20)return void this.createPopup("Room Name length Can't exceed 20 characters","Close");this.props.data.socket.emit("createRoom",{name:this.state.name,room:this.state.room,password:this.state.password})}else this.createPopup("All Fields Required!","Close")}},{key:"createPopup",value:function(e,t){var a=this,o=n.a.createElement(x,{message:e,buttonMess:t,closePopup:function(e){return a.closePopup(e)}});this.setState({popup:o})}},{key:"closePopup",value:function(e){this.setState({popup:null})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(C,{nameChangeHandler:function(t){return e.nameChangeHandler(t)},roomChangeHandler:function(t){return e.roomChangeHandler(t)},passChangeHandler:function(t){return e.passChangeHandler(t)},buttonClickedHandler:function(t){return e.buttonClickedHandler(t)}}),this.state.popup,n.a.createElement(A,null))}}]),t}(o.Component),U=Object(m.b)(function(e){return{data:e}},null)(L),T=a(34),J=a(17),K=a.n(J),q=function(e){var t,a=new Date(e.time).toTimeString();return t="me"===e.from.toLowerCase()?K.a.message_me:K.a.message_from,n.a.createElement("div",{className:K.a.message_outer_div},"me"!==e.from.toLowerCase()?n.a.createElement("div",{className:K.a.details},n.a.createElement("h4",null,e.from),n.a.createElement("h6",null,a)):null,n.a.createElement("div",{className:[t,K.a.message_common].join(" ")},n.a.createElement("p",{className:K.a.messdiv},e.message)),"me"===e.from.toLowerCase()?n.a.createElement("div",{className:K.a.details},n.a.createElement("h4",null,e.from),n.a.createElement("h6",null,a)):null)},B=a(2),I=a.n(B),W=a(43),Y=a.n(W),Z=function(e){return n.a.createElement("div",null,n.a.createElement("p",{className:Y.a.namediv},e.user," ",n.a.createElement("span",{className:Y.a.spanbg},"Live")))},G=function(e){function t(){var e,a;Object(_.a)(this,t);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={messageTyped:"",messages:[],online:[]},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;""===this.props.data._id&&this.props.history.push("/"),this.props.data.socket.on("roomMessage",function(t){e.addMessage(t)}),this.props.data.socket.on("userConnected",function(t){e.addUser(t)}),this.props.data.socket.on("userDisconnected",function(t){e.delUser(t)}),N.a.get("http://34.66.214.100:4000/getrooms/getonlineusers",{params:{_id:this.props.data._id}}).then(function(t){console.log(t),200===t.status&&t.data.forEach(function(t){e.addUser(t)})})}},{key:"addUser",value:function(e){var t={key:e.id,user:e.name};this.setState({online:[].concat(Object(T.a)(this.state.online),[t])})}},{key:"delUser",value:function(e){var t=this.state.online.filter(function(t){return e.key!==t.key});this.setState({online:Object(T.a)(t)})}},{key:"addMessage",value:function(e){console.log(e);var t={from:e.from,message:e.message,time:e.time};this.setState({messages:[].concat(Object(T.a)(this.state.messages),[t])})}},{key:"componentWillUnmount",value:function(){this.props.data.socket.removeAllListeners("roomMessage"),this.props.data.socket.removeAllListeners("userConnected"),this.props.data.socket.removeAllListeners("userDisconnected")}},{key:"messageChangeHandler",value:function(e){this.setState({messageTyped:e.target.value})}},{key:"sendMessage",value:function(e){var t=this.state.messageTyped;""!==t&&(this.props.data.socket.emit("messageRecieved",{message:t}),this.setState({messageTyped:""}),this.addMessage({from:"Me",message:t,time:(new Date).getTime()}))}},{key:"keyPressed",value:function(e){"Enter"===e.key&&this.sendMessage()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:I.a.chatroom_outer_div},n.a.createElement("div",{className:I.a.chatroom_header_div},n.a.createElement("p",{className:[I.a.header,I.a.header_name].join(" ")},this.props.data.name),n.a.createElement("p",{className:[I.a.header,I.a.header_room].join(" ")},"Room: ",this.props.data.room)),n.a.createElement("div",{className:I.a.chatroom_content},n.a.createElement("div",{className:[I.a.chatroom_content_comp,I.a.chatroom_content_online].join(" ")},this.state.online.map(function(e,t){return n.a.createElement(Z,{key:e.key,user:e.user})})),n.a.createElement("div",{className:[I.a.chatroom_content_comp,I.a.chatroom_content_message].join(" ")},this.state.messages.map(function(e,t){return n.a.createElement(q,{key:t,from:e.from,message:e.message,time:e.time})}))),n.a.createElement("div",{className:I.a.chatroom_input_div},n.a.createElement("input",{className:I.a.chatroominput,type:"text",value:this.state.messageTyped,onChange:function(t){return e.messageChangeHandler(t)},onKeyDown:function(t){return e.keyPressed(t)}}),n.a.createElement("button",{className:I.a.chatroombutton,onClick:function(t){return e.sendMessage(t)}},"Send")))}}]),t}(o.Component),Q=Object(m.b)(function(e){return{data:e}},null)(G),F=a(70),V=a.n(F),X=function(e){function t(){var e,a;Object(_.a)(this,t);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={popup:null},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.data.socket.on("roomCreationStatus",function(t){return e.roomStatus(t)})}},{key:"componentWillUnmount",value:function(){var e=this;console.log("unmount"),this.props.data.socket.removeListener("roomCreationStatus",function(t){return e.roomStatus(t)})}},{key:"roomStatus",value:function(e){e.status?(this.props.onChangeDetails(e._id,e.id,e.name,e.room),console.log(this.props.data),this.props.data.socket.emit("setDetails",{_id:e._id,id:e.id,name:e.name,room:e.room}),console.log(e),"CREATE"===e.type?this.props.history.push({pathname:"/room"}):"JOIN"===e.type&&this.props.history.push({pathname:"/room"})):this.createPopup(e.message,"Close")}},{key:"createPopup",value:function(e,t){var a=this;console.log("popup creation");var o=n.a.createElement(x,{message:e,buttonMess:t,closePopup:function(e){return a.closePopup(e)}});this.setState({popup:o})}},{key:"closePopup",value:function(e){this.setState({popup:null})}},{key:"render",value:function(){return n.a.createElement("div",{className:V.a.header},this.state.popup,n.a.createElement(E.a,{path:"/",exact:!0,component:U}),n.a.createElement(E.a,{path:"/room",exact:!0,component:Q}))}}]),t}(o.Component),z=Object(m.b)(function(e){return{data:e}},function(e){return{onChangeDetails:function(t,a,o,n){return e({type:u.addUser,_id:t,id:a,name:o,room:n})}}})(Object(E.e)(X));a(129);var $=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(d.a,null,n.a.createElement(z,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=Object(i.b)(h);r.a.render(n.a.createElement(m.a,{store:ee},n.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},16:function(e,t,a){e.exports={roomdiv:"createRoom_roomdiv__22E8Y",roomheader:"createRoom_roomheader__3cwe1",roominputdiv:"createRoom_roominputdiv__2fkiG",roominput:"createRoom_roominput__2Xqln",roombutton:"createRoom_roombutton__1BhUg"}},17:function(e,t,a){e.exports={message_outer_div:"message_message_outer_div__3yhyk",details:"message_details__3DX6N",message_me:"message_message_me__2bnwY",message_from:"message_message_from__1_KNI",message_common:"message_message_common__1x6cJ",messdiv:"message_messdiv__1llGa"}},2:function(e,t,a){e.exports={chatroom_outer_div:"ChatRoom_chatroom_outer_div__3dwvm",chatroom_input_div:"ChatRoom_chatroom_input_div__2t-7G",chatroom_header_div:"ChatRoom_chatroom_header_div__2M78J",header:"ChatRoom_header__1ZInJ",header_name:"ChatRoom_header_name__2KrmT",header_room:"ChatRoom_header_room__KDNli",chatroominput:"ChatRoom_chatroominput__1rgcB",chatroombutton:"ChatRoom_chatroombutton__H_ZvQ",chatroom_content:"ChatRoom_chatroom_content__E1yz2",chatroom_content_comp:"ChatRoom_chatroom_content_comp__3Dx32",chatroom_content_online:"ChatRoom_chatroom_content_online__1t2Uf",chatroom_content_message:"ChatRoom_chatroom_content_message__16DbR"}},20:function(e,t,a){e.exports={roomlistdiv:"roomList_roomlistdiv__2O78v",roomname:"roomList_roomname__9gAfw",roominput:"roomList_roominput__2_fK0",btn:"roomList_btn__1_yRV"}},23:function(e,t,a){e.exports={roomdiv:"room_roomdiv__2M77L",roomheader:"room_roomheader__1DK95",rotate:"room_rotate__1mdAf",roomcount:"room_roomcount__3wltp",roomjoin:"room_roomjoin__2OI4E"}},24:function(e,t,a){e.exports={popup:"popup_popup__dEvQV",popup_inner:"popup_popup_inner__3x0w7",popupheader:"popup_popupheader__3vj5Z",btn:"popup_btn__3Pl8t"}},43:function(e,t,a){e.exports={spanbg:"onlineuser_spanbg__2tCLQ",namediv:"onlineuser_namediv__2Wc8t"}},70:function(e,t,a){e.exports={header:"Auxiliary_header__UuwhZ"}},73:function(e,t,a){e.exports=a(130)}},[[73,1,2]]]);
//# sourceMappingURL=main.ba914a64.chunk.js.map